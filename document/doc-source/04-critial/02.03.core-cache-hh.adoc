ifndef::imagesdir[:imagesdir: ../images]
:data-uri:

=== 云原生节点缓存

==== 节点缓存基础

云原生节点缓存是从 Aeon 系统设计心得而来，它主要位于连接器和全局化操作，现阶段Zero中的云原生节点缓存主要包含如下三种（全局统一管理）：

[TIP]
====
没看错，这些类名不是化学程序，但来自化学中的灵感，云原生节点缓存全部位于包：`io.aeon.runtime` 中，新版主框架的底层缓存中全部拿掉了 `ConcurrentMap` 的方式构造缓存，而采用 `Cc` 结构，这样的结构有几点优势：

- 底层缓存实现可替换，由于支持同步和异步两种模式，底层缓存实现可以替换成任意您想要的模式（如 Redis）。
- 缓存接口统一调用，所有和缓存相关的组件、元数据、数据、流程、业务、接口都直接使用 `Cc` 结构，且从 `H1H / H2H / H3H` 中提取相关数据。
- 缓存统一标准化监控管理，监控程序上了之后，全框架缓存只需要捕捉此处的三个类就可以得到完整的缓存拓扑执行监控和管理。
====

内部缓存如下：

[options="header"]
|====
|类名|翻译|含义
|CH1H|氕(piē)|普通能源，用于存储云原生（单机运行）环境中的组件缓存。
|CH2H|氘(dāo)（重氢）|稀有能源，用于存储云原生（单机运行）环境中的应用级数据缓存，多应用模式尤其重要。
|CH3H|氚(chuān)|超稀有，用于存储云原生（单机运行）环境中的部署、租户级元数据缓存，云原生环境跨节点可共享。
|====

==== 缓存常量

Zero新版中的缓存常量只有两个：

[options="header"]
|====
|类全名|含义
|`io.horizon.runtime.cache.CStore` |Metadata规范下的新项目基础缓存，一般不直接使用，由于应用级缓存直接从它继承（实际不是继承），所以真正使用时可直接操作应用级模式同样可访问原生定义的缓存结构。
|`io.aeon.runtime.CRunning` |Aeon和Zero专用缓存类，它们的继承关系如：`CStore / CH1H / CH2H / CH3H / CRunning`，所以从 `CRunning` 中可访问所有父级接口中的缓存。
|====

[CAUTION]
====

- 此处内部缓存的访问控制域都是 `package` 默认域，所以不可以在此包之外访问，结合JVM安全模式，后期版本可直接限定开发人员的使用。
- CStore虽然是可直接访问的缓存，但不推荐开发人员使用，该缓存只是单纯留给开发人员继承时使用。
- 此处虽然是继承，但实际都是接口继承，采用了原型链的模式在操作，所以从概念上讲此处并非真正意义上的 *继承* 。
====
